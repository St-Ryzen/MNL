# Maloum Chatter Control - Setup Instructions

## Prerequisites

To use the Maloum Chatter Control system, you need:

1. A Supabase account (sign up at [supabase.com](https://supabase.com))
2. A Supabase project with the required tables set up

## Setting Up Supabase

1. Create a new Supabase project at [supabase.com](https://supabase.com)

2. Create the required tables in your Supabase dashboard:

### Users Table
```sql
CREATE TABLE users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  username VARCHAR(150) UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  is_admin BOOLEAN DEFAULT FALSE
);
```

### Model Accounts Table
```sql
CREATE TABLE model_accounts (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  model_username VARCHAR(150) UNIQUE NOT NULL,  -- Display name for chatters
  actual_username VARCHAR(150),  -- Actual login username (optional)
  encrypted_password BYTEA NOT NULL,
  assigned_chatter_ids INTEGER[] DEFAULT ARRAY[]::INTEGER[]  -- Array of chatter IDs assigned to this account
);
```

### Activity Logs Table
```sql
CREATE TABLE activity_logs (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  timestamp TIMESTAMP DEFAULT NOW(),
  user_id BIGINT REFERENCES users(id) NOT NULL,
  action VARCHAR(200) NOT NULL,
  details TEXT,
  ip_address INET
);
```

3. Get your Supabase URL and API key:
   - Go to your project dashboard
   - Click on "Project Settings"
   - Copy the "Project URL" (this is your SUPABASE_URL)
   - Go to "API" section and copy the "anon public" key (this is your SUPABASE_KEY)

## Configuration

1. Copy the `.env.example` file to `.env`:
   ```bash
   cp .env.example .env
   ```

2. Edit the `.env` file with your Supabase credentials:
   ```
   SUPABASE_URL=your_supabase_project_url
   SUPABASE_KEY=your_supabase_anon_key
   ```

## Running the Application

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

2. Run the server:
   ```bash
   python app.py
   ```

The application will now connect to your Supabase database and manage model accounts and chatters securely.